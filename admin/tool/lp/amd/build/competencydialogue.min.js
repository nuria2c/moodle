define(["jquery","core/notification","core/ajax","core/templates","core/str","tool_lp/dialogue"],function(a,b,c,d,e,f){var g={includerelated:!1,includecourses:!1},h=function(a){l(a.getContent())},i=function(c,e){a.extend(g,e);var i=k(c);i.done(function(a){d.render("tool_lp/competency_summary",a).done(function(b){new f(a.shortname,b,h,{modal:!1})}).fail(b.exception)}).fail(b.exception)},j=function(b){b.preventDefault();var c=a(b.target).data("id");i(c)},k=function(d,e){if(e)return a.when(e);var f=c.call([{methodname:"tool_lp_data_for_competency_summary",args:{competencyid:d,includerelated:g.includerelated,includecourses:g.includecourses}}]);return f[0].then(function(a){return a}).fail(b.exception)},l=function(b,c){a.extend(g,c),a(b).off("click",'[data-action="competency-dialogue"]',j),a(b).on("click",'[data-action="competency-dialogue"]',j)};return{enhance:l,showDialogue:i}});