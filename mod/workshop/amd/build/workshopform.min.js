define(["jquery","core/str","core/notification"],function(a,b,c){a.fn.extend({toggleText:function(a,b){return this.text(this.text()==b?a:b)}});var d=function(d,e,f){this.fieldsets=e,this.inputadvancedsettingselector=d,this.selfassessment=f,this.submitbuttonvalue=a("input[name='submitbutton']").val();var g=this;b.get_strings([{key:"showadvancedsettings",component:"moodle"},{key:"hideadvancedsettings",component:"moodle"},{key:"wizardsubmitbutton",component:"workshop"}]).done(function(b){g.showadvancedsettingsstring=b[0],g.hideadvancedsettingsstring=b[1],g.wizardbuttonvalue=b[2];var c=g.showadvancedsettingsstring,d="showadvancedsettings",e=a(g.inputadvancedsettingselector).val();1===parseInt(e)?(c=g.hideadvancedsettingsstring,d="hideadvancedsettings"):(a(g.fieldsets).hide(),a("input[name='submitbutton']").val(g.wizardbuttonvalue));var f=a("<a>",{text:c,title:c,href:"#","class":d});a(".collapsible-actions").prepend(f),a(".showadvancedsettings, .hideadvancedsettings").on("click",function(c){var d=a(g.inputadvancedsettingselector);1===parseInt(d.val())?(d.val(0),a("input[name='submitbutton']").val(g.wizardbuttonvalue)):(d.val(1),a("input[name='submitbutton']").val(g.submitbuttonvalue)),c.preventDefault();var e=a(c.target);a(g.fieldsets).toggle(),e.toggleClass("showadvancedsettings hideadvancedsettings"),e.toggleText(b[0],b[1])})}).fail(c.exception),g.showHideAnonymity(),a(g.assessmenttypeSelector+", "+g.allowsubmissionSelector).on("change",function(){g.showHideAnonymity()})};return d.prototype.showadvancedsettingsstring="",d.prototype.hideadvancedsettingsstring="",d.prototype.fieldsets="",d.prototype.inputadvancedsettingselector="",d.prototype.submitbuttonvalue="",d.prototype.wizardbuttonvalue="",d.prototype.selfassessment=null,d.prototype.assessmenttypeSelector="input[name='assessmenttype']",d.prototype.allowsubmissionSelector="input[name='allowsubmission']",d.prototype.displayAppraiseesNameSelector="#fitem_id_displayappraiseesname",d.prototype.displayAppraisersNameSelector="#fitem_id_displayappraisersname",d.prototype.showHideAnonymity=function(){parseInt(a(this.assessmenttypeSelector+":checked").val())==this.selfassessment?(a(this.displayAppraiseesNameSelector).hide(),a(this.displayAppraisersNameSelector).hide()):(a(this.displayAppraisersNameSelector).show(),a(this.allowsubmissionSelector).is(":not(:checked)")?a(this.displayAppraiseesNameSelector).hide():a(this.displayAppraiseesNameSelector).show())},{init:function(a,b,c){new d(a,b,c)}}});