define(["jquery","core/str","core/notification"],function(a,b,c){a.fn.extend({toggleHideShowLink:function(a,b){this.text(this.text()==b?a:b),this.attr("title",this.attr("title")==b?a:b)}});var d=function(d,e,f,g){this.fieldsets=e,this.inputadvancedsettingselector=d,this.selfassessment=f,this.submitbuttonvalue=a("input[name='submitbutton']").val();var h=this;b.get_strings([{key:"showadvancedsettings",component:"moodle"},{key:"hideadvancedsettings",component:"moodle"},{key:"wizardsubmitbutton",component:"workshop"}]).done(function(b){h.showadvancedsettingsstring=b[0],h.hideadvancedsettingsstring=b[1],h.wizardbuttonvalue=b[2];var c=h.showadvancedsettingsstring,d="showadvancedsettings",e=a(h.inputadvancedsettingselector).val();1===parseInt(e)?(c=h.hideadvancedsettingsstring,d="hideadvancedsettings"):(a(h.fieldsets).hide(),a("input[name='submitbutton']").val(h.wizardbuttonvalue));var f=a("<a>",{text:c,title:c,href:"#","class":d});a(".collapsible-actions").prepend(f),a(".showadvancedsettings, .hideadvancedsettings").on("click",function(c){var d=a(h.inputadvancedsettingselector);1===parseInt(d.val())?(d.val(0),a("input[name='submitbutton']").val(h.wizardbuttonvalue),M.util.set_user_preference("workshop_form_showadvanced",0)):(d.val(1),a("input[name='submitbutton']").val(h.submitbuttonvalue),M.util.set_user_preference("workshop_form_showadvanced",1)),c.preventDefault();var e=a(c.target);a(h.fieldsets).toggle(),e.toggleClass("showadvancedsettings hideadvancedsettings"),e.toggleHideShowLink(b[0],b[1])})}).fail(c.exception),h.showHideAnonymity(),a(h.assessmenttypeSelector+", "+h.allowsubmissionSelector).on("change",function(){h.showHideAnonymity()}),a(document).ready(function(){g&&a("html, body").animate({scrollTop:a(g).offset().top},0)})};return d.prototype.showadvancedsettingsstring="",d.prototype.hideadvancedsettingsstring="",d.prototype.fieldsets="",d.prototype.inputadvancedsettingselector="",d.prototype.submitbuttonvalue="",d.prototype.wizardbuttonvalue="",d.prototype.selfassessment=null,d.prototype.assessmenttypeSelector="input[name='assessmenttype']",d.prototype.allowsubmissionSelector="input[name='allowsubmission']",d.prototype.displayAppraiseesNameSelector="#fitem_id_displayappraiseesname",d.prototype.displayAppraisersNameSelector="#fitem_id_displayappraisersname",d.prototype.showHideAnonymity=function(){parseInt(a(this.assessmenttypeSelector+":checked").val())==this.selfassessment?(a(this.displayAppraiseesNameSelector).hide(),a(this.displayAppraisersNameSelector).hide()):(a(this.displayAppraisersNameSelector).show(),a(this.allowsubmissionSelector).is(":not(:checked)")?a(this.displayAppraiseesNameSelector).hide():a(this.displayAppraiseesNameSelector).show())},{init:function(a,b,c,e){new d(a,b,c,e)}}});